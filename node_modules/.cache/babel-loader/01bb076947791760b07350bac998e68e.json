{"ast":null,"code":"import _objectSpread from \"/home/george/projects/beads/beads/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { PLACE_BEAD, SET_BRUSH_POSITION, REDO, UNDO, SET_ACTIVE_COLOR, SET_MOUSE_STATUS } from \"../constants/constants\";\nconst initialState = {\n  beads: {},\n  brushPosition: {\n    x: 0,\n    y: 0\n  },\n  history: [],\n  histNum: 0,\n  activeColor: \"#000000\",\n  mouseStatus: \"\" // transactions: [],\n  // totalCash: 0\n\n};\n\nconst rootReducer = (state = initialState, action) => {\n  let newState = state;\n\n  switch (action.type) {\n    case PLACE_BEAD:\n      newState = _objectSpread({}, state, {\n        beads: action.payload\n      });\n      const history = state.history;\n      var histNum = state.histNum;\n      history.splice(histNum, 0, newState);\n      history.join();\n      histNum += 1;\n      newState = _objectSpread({}, newState, {\n        history: history,\n        histNum: histNum\n      });\n      break;\n\n    case SET_BRUSH_POSITION:\n      newState = _objectSpread({}, state, {\n        brushPosition: action.payload\n      });\n      break;\n\n    case REDO:\n      if (state.histNum < state.history.length - 1) {\n        histNum = state.histNum;\n        histNum = histNum + 1;\n        newState = state.history[histNum];\n        newState = _objectSpread({}, newState, {\n          histNum: histNum\n        });\n      }\n\n      break;\n\n    case UNDO:\n      if (state.histNum > 0) {\n        histNum = state.histNum;\n        histNum = histNum - 1;\n        newState = state.history[histNum];\n        newState = _objectSpread({}, newState, {\n          histNum: histNum\n        });\n      }\n\n      break;\n\n    case SET_ACTIVE_COLOR:\n      newState = _objectSpread({}, state, {\n        activeColor: action.payload\n      });\n      break;\n\n    case SET_MOUSE_STATUS:\n      newState = _objectSpread({}, state, {\n        mouseStatus: action.payload\n      });\n      break;\n\n    default:\n      break;\n    // return state;\n  }\n\n  return newState;\n};\n\nexport default rootReducer;","map":{"version":3,"sources":["/home/george/projects/beads/beads/src/reducers/rootReducer.js"],"names":["PLACE_BEAD","SET_BRUSH_POSITION","REDO","UNDO","SET_ACTIVE_COLOR","SET_MOUSE_STATUS","initialState","beads","brushPosition","x","y","history","histNum","activeColor","mouseStatus","rootReducer","state","action","newState","type","payload","splice","join","length"],"mappings":";AAAA,SAASA,UAAT,EAAqBC,kBAArB,EAAyCC,IAAzC,EAA+CC,IAA/C,EAAqDC,gBAArD,EAAuEC,gBAAvE,QAA+F,wBAA/F;AAGA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAE,EADU;AAEjBC,EAAAA,aAAa,EAAE;AAACC,IAAAA,CAAC,EAAE,CAAJ;AAAOC,IAAAA,CAAC,EAAE;AAAV,GAFE;AAGjBC,EAAAA,OAAO,EAAE,EAHQ;AAIjBC,EAAAA,OAAO,EAAE,CAJQ;AAKjBC,EAAAA,WAAW,EAAE,SALI;AAMjBC,EAAAA,WAAW,EAAE,EANI,CAOjB;AACA;;AARiB,CAArB;;AAWA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGV,YAAT,EAAuBW,MAAvB,KAAkC;AAClD,MAAIC,QAAQ,GAAGF,KAAf;;AACA,UAAOC,MAAM,CAACE,IAAd;AACI,SAAKnB,UAAL;AAEIkB,MAAAA,QAAQ,qBACDF,KADC;AAEJT,QAAAA,KAAK,EAAEU,MAAM,CAACG;AAFV,QAAR;AAKA,YAAMT,OAAO,GAAGK,KAAK,CAACL,OAAtB;AACA,UAAIC,OAAO,GAAGI,KAAK,CAACJ,OAApB;AACAD,MAAAA,OAAO,CAACU,MAAR,CAAeT,OAAf,EAAwB,CAAxB,EAA2BM,QAA3B;AACAP,MAAAA,OAAO,CAACW,IAAR;AACAV,MAAAA,OAAO,IAAI,CAAX;AAEAM,MAAAA,QAAQ,qBACDA,QADC;AAEJP,QAAAA,OAAO,EAAEA,OAFL;AAGJC,QAAAA,OAAO,EAAEA;AAHL,QAAR;AAKA;;AACJ,SAAKX,kBAAL;AACIiB,MAAAA,QAAQ,qBACDF,KADC;AAEJR,QAAAA,aAAa,EAAES,MAAM,CAACG;AAFlB,QAAR;AAIA;;AACJ,SAAKlB,IAAL;AACI,UAAGc,KAAK,CAACJ,OAAN,GAAgBI,KAAK,CAACL,OAAN,CAAcY,MAAd,GAAqB,CAAxC,EAA0C;AACtCX,QAAAA,OAAO,GAAGI,KAAK,CAACJ,OAAhB;AACAA,QAAAA,OAAO,GAAGA,OAAO,GAAG,CAApB;AACAM,QAAAA,QAAQ,GAAGF,KAAK,CAACL,OAAN,CAAcC,OAAd,CAAX;AACAM,QAAAA,QAAQ,qBACDA,QADC;AAEJN,UAAAA,OAAO,EAAEA;AAFL,UAAR;AAIH;;AACD;;AACJ,SAAKT,IAAL;AACI,UAAGa,KAAK,CAACJ,OAAN,GAAgB,CAAnB,EAAqB;AACjBA,QAAAA,OAAO,GAAGI,KAAK,CAACJ,OAAhB;AACAA,QAAAA,OAAO,GAAGA,OAAO,GAAG,CAApB;AACAM,QAAAA,QAAQ,GAAGF,KAAK,CAACL,OAAN,CAAcC,OAAd,CAAX;AACAM,QAAAA,QAAQ,qBACDA,QADC;AAEJN,UAAAA,OAAO,EAAEA;AAFL,UAAR;AAIH;;AACD;;AACJ,SAAKR,gBAAL;AACIc,MAAAA,QAAQ,qBACDF,KADC;AAEJH,QAAAA,WAAW,EAAEI,MAAM,CAACG;AAFhB,QAAR;AAIA;;AACJ,SAAKf,gBAAL;AACIa,MAAAA,QAAQ,qBACDF,KADC;AAEJF,QAAAA,WAAW,EAAEG,MAAM,CAACG;AAFhB,QAAR;AAIA;;AACJ;AACI;AACA;AA9DR;;AAiEA,SAAOF,QAAP;AACH,CApED;;AAqEA,eAAeH,WAAf","sourcesContent":["import { PLACE_BEAD, SET_BRUSH_POSITION, REDO, UNDO, SET_ACTIVE_COLOR, SET_MOUSE_STATUS } from \"../constants/constants\";\n\n\nconst initialState = {\n    beads: {},\n    brushPosition: {x: 0, y: 0},\n    history: [],\n    histNum: 0,\n    activeColor: \"#000000\",\n    mouseStatus: \"\"\n    // transactions: [],\n    // totalCash: 0\n};\n\nconst rootReducer = (state = initialState, action) => {\n    let newState = state;\n    switch(action.type) {\n        case PLACE_BEAD:\n            \n            newState = {\n                ...state,\n                beads: action.payload\n            };\n\n            const history = state.history;\n            var histNum = state.histNum;\n            history.splice(histNum, 0, newState);\n            history.join();\n            histNum += 1;\n\n            newState = {\n                ...newState,\n                history: history,\n                histNum: histNum\n            }\n            break;\n        case SET_BRUSH_POSITION:\n            newState ={\n                ...state,\n                brushPosition: action.payload\n            };\n            break;\n        case REDO:\n            if(state.histNum < state.history.length-1){\n                histNum = state.histNum;\n                histNum = histNum + 1;\n                newState = state.history[histNum];\n                newState = {\n                    ...newState,\n                    histNum: histNum\n                }\n            }\n            break;\n        case UNDO:\n            if(state.histNum > 0){\n                histNum = state.histNum;\n                histNum = histNum - 1;\n                newState = state.history[histNum];\n                newState = {\n                    ...newState,\n                    histNum: histNum\n                }\n            }\n            break;\n        case SET_ACTIVE_COLOR:\n            newState = {\n                ...state,\n                activeColor: action.payload\n            }\n            break;\n        case SET_MOUSE_STATUS:\n            newState = {\n                ...state,\n                mouseStatus: action.payload\n            }\n            break;\n        default:\n            break;\n            // return state;\n    }\n    \n    return newState;\n}\nexport default rootReducer;"]},"metadata":{},"sourceType":"module"}