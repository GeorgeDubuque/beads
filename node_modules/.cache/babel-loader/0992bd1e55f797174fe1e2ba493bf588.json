{"ast":null,"code":"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \"/* add css styles here (optional) */\\n\\n.styles_test__3OKZ1 {\\n  display: inline-block;\\n  margin: 2em auto;\\n  border: 2px solid #000;\\n  font-size: 2em;\\n}\\n\";\nstyleInject(css);\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar PenDraw = function (_Component) {\n  inherits(PenDraw, _Component);\n\n  function PenDraw() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, PenDraw);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = PenDraw.__proto__ || Object.getPrototypeOf(PenDraw)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      cvs: null,\n      ctx: null,\n      mouse: 0,\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 0,\n      clearScreen: 0\n    }, _this.onMouseUp = function (e) {\n      _this.setState({\n        mouse: 0\n      });\n    }, _this.onMouseDown = function (e) {\n      var p = _this.getMousePos(e);\n\n      _this.setState({\n        mouse: 1,\n        x1: p.x,\n        y1: p.y\n      });\n    }, _this.onMouseMove = function (e) {\n      var _this$state = _this.state,\n          x1 = _this$state.x1,\n          y1 = _this$state.y1,\n          mouse = _this$state.mouse;\n\n      if (mouse) {\n        var p = _this.getMousePos(e);\n\n        _this.setState({\n          x2: p.x,\n          y2: p.y\n        });\n\n        _this.drawLine({\n          x: x1,\n          y: y1\n        }, p);\n\n        _this.setState({\n          x1: p.x,\n          y1: p.y\n        });\n      }\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(PenDraw, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var cvs = document.getElementById(\"mycanvas\");\n      var ctx = cvs.getContext(\"2d\");\n      this.setState({\n        cvs: cvs,\n        ctx: ctx\n      });\n    }\n  }, {\n    key: 'UNSAFE_componentWillReceiveProps',\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.clearScreen) {\n        this.clearCanvas();\n      }\n    }\n  }, {\n    key: 'getMousePos',\n    value: function getMousePos(e) {\n      var rect = this.state.cvs.getBoundingClientRect();\n      return {\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      };\n    }\n  }, {\n    key: 'clearCanvas',\n    value: function clearCanvas() {\n      var cvs = document.getElementById(\"mycanvas\");\n      var ctx = cvs.getContext(\"2d\");\n      ctx.save();\n      ctx.globalCompositeOperation = \"copy\";\n      ctx.strokeStyle = \"transparent\";\n      ctx.beginPath();\n      ctx.lineTo(0, 0);\n      ctx.stroke();\n      ctx.restore();\n    }\n  }, {\n    key: 'drawLine',\n    value: function drawLine(p, q) {\n      var ctx = this.state.ctx;\n      ctx.beginPath();\n      ctx.strokeStyle = this.props.lineColor;\n      ctx.lineJoin = \"round\";\n      ctx.lineCap = \"round\";\n      ctx.lineWidth = this.props.lineWidth;\n      ctx.moveTo(p.x, p.y);\n      ctx.lineTo(q.x, q.y);\n      ctx.stroke();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var style = this.props.style;\n      return React.createElement('div', null, React.createElement('canvas', {\n        id: 'mycanvas',\n        width: style ? style.width : \"200px\",\n        height: style ? style.height : \"200px\",\n        style: _extends({}, style),\n        onMouseUp: this.onMouseUp,\n        onMouseDown: this.onMouseDown,\n        onMouseMove: this.onMouseMove\n      }));\n    }\n  }]);\n  return PenDraw;\n}(Component);\n\nPenDraw.propTypes = {\n  style: PropTypes.object,\n  clearScreen: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  lineWidth: PropTypes.number,\n  lineColor: PropTypes.string\n};\nexport default PenDraw;","map":{"version":3,"sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"names":["PenDraw","Component","propTypes","PropTypes","string","state","cvs","document","ctx","nextProps","e","rect","top","onMouseUp","mouse","onMouseDown","p","y","q","onMouseMove","x1","y1","x2","y2","x","style"],"mappings":"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","sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport styles from './styles.css'\n\nexport default class PenDraw extends Component {\n  static propTypes = {\n    style: PropTypes.object,\n    clearScreen:PropTypes.oneOfType([PropTypes.bool,PropTypes.number]),\n    lineWidth:PropTypes.number,\n    lineColor:PropTypes.string\n  }\n  state={\n    cvs:null,\n    ctx:null,\n    mouse:0,\n\t\tx1:0,\n    y1:0,\n    x2:0,\n    y2:0,\n    clearScreen:0\n  }\n  componentDidMount(){\n    var cvs=document.getElementById(\"mycanvas\")\n    var ctx=cvs.getContext(\"2d\");\n    this.setState({cvs,ctx})\n  }\n  UNSAFE_componentWillReceiveProps(nextProps){\n    if(nextProps.clearScreen){\n      this.clearCanvas()\n    }\n  }\n  getMousePos(e){\n    var rect=this.state.cvs.getBoundingClientRect();\n    return{\n        x:e.clientX-rect.left,\n        y:e.clientY-rect.top\n    }\n  }\n  clearCanvas(){\n    const cvs=document.getElementById(\"mycanvas\")\n    const ctx = cvs.getContext(\"2d\")\n    ctx.save()\n    ctx.globalCompositeOperation =\"copy\"\n    ctx.strokeStyle=\"transparent\"\n    ctx.beginPath()\n    ctx.lineTo(0,0)\n    ctx.stroke()\n    ctx.restore()\n  }\n  onMouseUp=(e)=>{\n    this.setState({mouse:0})\n  }\n  onMouseDown=(e)=>{\n    var p=this.getMousePos(e)\n    this.setState({\n      mouse:1,\n\t\t\tx1:p.x,\n      y1:p.y\n    })\n  }\n  drawLine(p,q){\n    var ctx=this.state.ctx\n    ctx.beginPath()\n    ctx.strokeStyle = this.props.lineColor;\n    ctx.lineJoin=\"round\";\n    ctx.lineCap=\"round\";\n    ctx.lineWidth = this.props.lineWidth;\n    ctx.moveTo(p.x,p.y);\n    ctx.lineTo(q.x,q.y);\n    ctx.stroke();\n  }\n  onMouseMove=(e)=>{\n    var {x1,y1,mouse}=this.state\n    if(mouse){\n      var p= this.getMousePos(e)\n\t\t  this.setState({x2:p.x,y2:p.y})\n      this.drawLine({x:x1,y:y1},p)\n      this.setState({\n        x1:p.x,\n        y1:p.y\n      })\n    }\n  }\n  render() {\n    const {\n      style\n    } = this.props\n    \n    return (\n      <div>\n      <canvas \n        id=\"mycanvas\"\n        width={style? style.width : \"200px\"} height={style?style.height: \"200px\"}\n        style={{...style}}\n        onMouseUp={this.onMouseUp}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n        >\n\n        </canvas>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}