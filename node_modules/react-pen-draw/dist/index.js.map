{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport styles from './styles.css'\n\nexport default class PenDraw extends Component {\n  static propTypes = {\n    style: PropTypes.object,\n    clearScreen:PropTypes.oneOfType([PropTypes.bool,PropTypes.number]),\n    lineWidth:PropTypes.number,\n    lineColor:PropTypes.string\n  }\n  state={\n    cvs:null,\n    ctx:null,\n    mouse:0,\n\t\tx1:0,\n    y1:0,\n    x2:0,\n    y2:0,\n    clearScreen:0\n  }\n  componentDidMount(){\n    var cvs=document.getElementById(\"mycanvas\")\n    var ctx=cvs.getContext(\"2d\");\n    this.setState({cvs,ctx})\n  }\n  UNSAFE_componentWillReceiveProps(nextProps){\n    if(nextProps.clearScreen){\n      this.clearCanvas()\n    }\n  }\n  getMousePos(e){\n    var rect=this.state.cvs.getBoundingClientRect();\n    return{\n        x:e.clientX-rect.left,\n        y:e.clientY-rect.top\n    }\n  }\n  clearCanvas(){\n    const cvs=document.getElementById(\"mycanvas\")\n    const ctx = cvs.getContext(\"2d\")\n    ctx.save()\n    ctx.globalCompositeOperation =\"copy\"\n    ctx.strokeStyle=\"transparent\"\n    ctx.beginPath()\n    ctx.lineTo(0,0)\n    ctx.stroke()\n    ctx.restore()\n  }\n  onMouseUp=(e)=>{\n    this.setState({mouse:0})\n  }\n  onMouseDown=(e)=>{\n    var p=this.getMousePos(e)\n    this.setState({\n      mouse:1,\n\t\t\tx1:p.x,\n      y1:p.y\n    })\n  }\n  drawLine(p,q){\n    var ctx=this.state.ctx\n    ctx.beginPath()\n    ctx.strokeStyle = this.props.lineColor;\n    ctx.lineJoin=\"round\";\n    ctx.lineCap=\"round\";\n    ctx.lineWidth = this.props.lineWidth;\n    ctx.moveTo(p.x,p.y);\n    ctx.lineTo(q.x,q.y);\n    ctx.stroke();\n  }\n  onMouseMove=(e)=>{\n    var {x1,y1,mouse}=this.state\n    if(mouse){\n      var p= this.getMousePos(e)\n\t\t  this.setState({x2:p.x,y2:p.y})\n      this.drawLine({x:x1,y:y1},p)\n      this.setState({\n        x1:p.x,\n        y1:p.y\n      })\n    }\n  }\n  render() {\n    const {\n      style\n    } = this.props\n    \n    return (\n      <div>\n      <canvas \n        id=\"mycanvas\"\n        width={style? style.width : \"200px\"} height={style?style.height: \"200px\"}\n        style={{...style}}\n        onMouseUp={this.onMouseUp}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n        >\n\n        </canvas>\n      </div>\n    )\n  }\n}\n"],"names":["PenDraw","state","onMouseUp","e","setState","mouse","onMouseDown","p","getMousePos","x","y","onMouseMove","x1","y1","x2","y2","drawLine","cvs","document","getElementById","ctx","getContext","nextProps","clearScreen","clearCanvas","rect","getBoundingClientRect","clientX","left","clientY","top","save","globalCompositeOperation","strokeStyle","beginPath","lineTo","stroke","restore","q","props","lineColor","lineJoin","lineCap","lineWidth","moveTo","style","React","width","height","Component","propTypes","PropTypes","object","oneOfType","bool","number","string"],"mappings":"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"}